(()=>{"use strict";function e(e){return e.length>=10}class t{static create(e){return fetch("https://question-app-85d33-default-rtdb.europe-west1.firebasedatabase.app/questions.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>(e.id=t.name,e))).then(n).then(t.renderList)}static renderList(){const e=i(),t=e.length?e.map(a).join(""):"<div>Вопросов нет</div>";document.querySelector(".list").innerHTML=t}static fetch(e){return fetch(`https://question-app-85d33-default-rtdb.europe-west1.firebasedatabase.app/questions.json?auth=${e}`).then((e=>e.json())).then((e=>{console.log("Questions",e)}))}}function n(e){const t=i();t.push(e),localStorage.setItem("questions",JSON.stringify(t))}function i(){return JSON.parse(localStorage.getItem("questions")||"[]")}function a(e){return`\n        <div>\n        ${new Date(e.date).toLocaleDateString()}\n        ${new Date(e.date).toLocaleTimeString()}\n        </div>\n        <div>${e.text}</div>\n        <br>\n    `}(()=>{window.addEventListener("load",t.renderList);const n=document.querySelector("#form"),i=n.querySelector("#input-question"),a=n.querySelector("#submit-btn"),o=document.querySelector("#modal-btn");n.addEventListener("submit",(n=>{if(n.preventDefault(),e(i.value)){const e={text:i.value.trim(),date:(new Date).toJSON()};a.disabled=!0,t.create(e).then((()=>{console.log(e),i.value="",i.className="",a.disabled=!1}))}})),i.addEventListener("input",(t=>{a.disabled=!e(i.value)})),o.addEventListener("click",(e=>{!function(e,t){const n=document.createElement("div");n.classList.add("modal"),n.innerHTML='\n        <h1>Авторизация</h1>\n        <div class = \'modal-content\'>\n    <form class="mui-form" id="auth-form">\n    <div class="mui-textfield mui-textfield--float-label">\n      <input type="text" id="email" required>\n      <label for="email">Email</label>\n    </div>\n    <div class="mui-textfield mui-textfield--float-label">\n      <input type="text" id="password" required>\n      <label for="password">Пароль</label>\n    </div>\n    <button\n        type="submit"\n        class="mui-btn mui-btn--raised mui-btn--primary"\n        >\n        Войти\n    </button>\n  </form>\n    </div>\n    ',mui.overlay("on",n)}(),document.querySelector("#auth-form").addEventListener("submit",(e=>{var n,i;e.preventDefault(),(n=e.target.querySelector("#email").value,i=e.target.querySelector("#password").value,fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyA7kOhOqQ3va8sLgc0r7ukIwBB_I6j4psE",{method:"POST",body:JSON.stringify({email:n,password:i,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.idToken}))).then(t.fetch)}),{once:!0})}))})()})();